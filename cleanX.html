
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>cleanX module &#8212; cleanX 0.0.4 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="cleanX" href="modules.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-cleanX">
<span id="cleanx-module"></span><h1>cleanX module<a class="headerlink" href="#module-cleanX" title="Permalink to this headline">¶</a></h1>
<p>Library for cleaning radiological data used in machine learning
applications</p>
<dl class="py function">
<dt id="cleanX.augment_and_move">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">augment_and_move</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformations</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.augment_and_move" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes images and applies the same list of augmentations, which can include
the cleanX function crop, to all of them</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>origin_folder</strong> (<em>directory</em>) – The folder in which the images are</p></li>
<li><p><strong>target_folder</strong> (<em>directory</em>) – The folder where augmented images will be sent</p></li>
<li><p><strong>transformations</strong> (<em>list</em>) – A list of augmentation functions to apply</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>technically a nonreturning function, but new images will be made</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>none</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.blur_out_edges">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">blur_out_edges</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.blur_out_edges" title="Permalink to this definition">¶</a></dt>
<dd><p>For an individual image, blurs out the edges as an augmentation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image</strong> (<em>Image</em><em> (</em><em>JPEG</em><em>)</em>) – Image</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>blurred_edge_image an array of an image blurred around the edges</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.check_paths_for_group_leakage">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">check_paths_for_group_leakage</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.check_paths_for_group_leakage" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds train samples that have been accidentally leaked into test
samples</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_df</strong> (<em>DataFrame</em>) – Pandas dataframe containing information about
train assets.</p></li>
<li><p><strong>test_df</strong> (<em>DataFrame</em>) – Pandas dataframe containing information about
train assets.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>duplications of any image into both sets as a new dataframe</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.create_matrix">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">create_matrix</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_element</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.create_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes width, height then creates a matrix populated by the default
element. Super handy for advanced image manipulation. Note you can not
create matrices bigger than your computer memory can handle making.
Therefore the function will work on matrices with dimensions up to
maybe 500*500 depending</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>width</strong> (<em>integer</em>) – Width of the matrix to be created</p></li>
<li><p><strong>height</strong> (<em>integer</em>) – The height of matrix to be created</p></li>
<li><p><strong>default_element</strong> (<em>float</em><em> or </em><em>integer</em><em> or </em><em>string</em>) – Element to populate the matrix with</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>2D matrix populated</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>matrix</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.crop">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">crop</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.crop" title="Permalink to this definition">¶</a></dt>
<dd><p>Crops an image of a black frame: does both PIL and opencv2 images</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image</strong> (<em>Image</em><em> (</em><em>JPEG</em><em>)</em>) – Image</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>image cropped of black edges</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>image[
np.min(y_nonzero):np.max(y_nonzero),
np.min(x_nonzero):np.max(x_nonzero))</p>
</dd>
</dl>
<p>]</p>
</dd></dl>

<dl class="py function">
<dt id="cleanX.crop_np">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">crop_np</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.crop_np" title="Permalink to this definition">¶</a></dt>
<dd><p>Crops black edges of an image array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image_array</strong> (<em>array</em>) – Image array.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>image_array[
np.min(y_nonzero):np.max(y_nonzero),
np.min(x_nonzero):np.max(x_nonzero),</p>
</dd>
</dl>
<p>]
:rtype: ndarray</p>
</dd></dl>

<dl class="py function">
<dt id="cleanX.crop_pil">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">crop_pil</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.crop_pil" title="Permalink to this definition">¶</a></dt>
<dd><p>Crops black edges of an Pil/Pillow image</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image_array</strong> (<em>image</em>) – Image.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>image_array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.crop_them_all">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">crop_them_all</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_folder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.crop_them_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Crops all images and moves them to a target folder</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>origin_folder</strong> (<em>directory</em>) – The folder in which the images are</p></li>
<li><p><strong>target_folder</strong> (<em>directory</em>) – The folder where augmented images will be sent</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>technically nothing returned, but new images will be made</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>none</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.dataframe_up_my_pics">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">dataframe_up_my_pics</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diagnosis_string</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.dataframe_up_my_pics" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes images in a directory (should all be with same label), and puts the
name (with path) and label into a dataframe</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> (<em>Directory</em>) – Directory (folder).</p></li>
<li><p><strong>diagnosis_string</strong> (<em>string</em>) – Usually a label, may be any string</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe of pictures and label</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.dimensions_to_df">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">dimensions_to_df</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.dimensions_to_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds dimensions on images in a folder, and makes a df for exploratory
data analysis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>folder_name</strong> (<em>Folder/directory</em>) – Adress of folder with images.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>image height, width and proportion height/width as a new dataframe</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.dimensions_to_histo">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">dimensions_to_histo</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bins_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.dimensions_to_histo" title="Permalink to this definition">¶</a></dt>
<dd><p>Looks in the directory given, and produces a histogram of various widths
and heights. Important information as many neural nets take images all the
same size. Classically most chest-X-rays are 2500*2000 or 2500 <a href="#id1"><span class="problematic" id="id2">*</span></a>2048;
however the dataset may be different and/or varied</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder_name</strong> (<em>string</em>) – Folder_name, directory name.</p></li>
<li><p><strong>bins_count</strong> (<em>int</em>) – bins_count, number of bins desired (defaults to 10)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>histo_ht_wt, a labeled histogram</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.find_big_lines">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">find_big_lines</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_length</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.find_big_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds number of lines in images at or over the length of ‘line_legnth’,
gives back a dataframe with this information</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> (<em>directory</em>) – directory with set_of_images</p></li>
<li><p><strong>line_length</strong> (<em>integer</em>) – length of lines at or above which to pay attention to</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dataframe with column for line count at or above line_legnth</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.find_by_sample_upper">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">find_by_sample_upper</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percent_height_of_sample</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_for_line</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.find_by_sample_upper" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes average of upper pixels, and can show you outliers defined by a
percentage, e.g. shows images with an average of top pixels in top x %
where x is the percent height of the sample.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_directory</strong> (<em>integer</em>) – The folder in which the images are</p></li>
<li><p><strong>percent_height_of_sample</strong> – From where on image to call upper</p></li>
<li><p><strong>value_for_line</strong> (<em>integer</em>) – From where in pixel values to call averaged
values abnormal</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe with images labeled</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.find_duplicated_images">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">find_duplicated_images</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.find_duplicated_images" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds duplicated images and returns a list of them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>directory</strong> (<em>Directory</em>) – Directory (folder).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of duplicated images</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.find_duplicated_images_todf">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">find_duplicated_images_todf</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.find_duplicated_images_todf" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds duplicated images and returns a dataframe of them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>directory</strong> (<em>Directory</em>) – Directory (folder).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dataframe of duplicated images</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.find_outliers_by_mean_to_df">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">find_outliers_by_mean_to_df</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentage_to_say_outliers</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.find_outliers_by_mean_to_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Important note: approximate, and it can by chance cut the group
so images with
the same mean are in and out of normal range if the knife so falls</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_directory</strong> (<em>directory</em>) – The folder in which the images are</p></li>
<li><p><strong>percentage_to_say_outliers</strong> (<em>integer</em>) – Percentage to capture</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe all images, marked as high, low or within range</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.find_outliers_by_total_mean">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">find_outliers_by_total_mean</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentage_to_say_outliers</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.find_outliers_by_total_mean" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes the average of all pixels in an image, returns a dataframe with
those images that are outliers by mean…should catch some inverted or
problem images</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_directory</strong> (<em>directory</em>) – The folder in which the images are</p></li>
<li><p><strong>percentage_to_say_outliers</strong> (<em>integer</em>) – Percentage to capture</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe made up of outliers only</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.find_sample_upper_greater_than_lower">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">find_sample_upper_greater_than_lower</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percent_height_of_sample</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.find_sample_upper_greater_than_lower" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes average of upper pixels, average of lower (you define what
percent of picture should be considered upper and lower) and compares.
In a CXR if lower average is greater than upper it may be upside down
or otherwise bizzare, as the neck is smaller than the abdomen.</p>
</dd></dl>

<dl class="py function">
<dt id="cleanX.find_suspect_text">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">find_suspect_text</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_word</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.find_suspect_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds images with a specific text you ask for on them.
Multi-lingual including English. Accuracy is very high, but not perfect.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> (<em>Directory</em>) – Directory (folder).</p></li>
<li><p><strong>label_word</strong> (<em>string</em>) – Label word</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe with a column of text found over the legnth</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.find_suspect_text_by_legnth">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">find_suspect_text_by_legnth</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legnth</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.find_suspect_text_by_legnth" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds images with text over a specific legnth you ask for.
Useful if you know you do not care about R and L or SUP.
Multi-lingual including English. Accuracy is very high, but not perfect.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> (<em>Directory</em>) – Directory (folder).</p></li>
<li><p><strong>legnth</strong> (<em>integer</em>) – Legnth to find above, inclusive</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe with a column of text found</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.find_tiny_image_differences">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">find_tiny_image_differences</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.find_tiny_image_differences" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds differences between a manufactured tiny image, and all your images at
that size. If you return the outliers they are inverted,
or dramatically different in some way. Note: percentile returned
is approximate, may be a tad more</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> (<em>Directory</em>) – Directory (folder).</p></li>
<li><p><strong>s</strong> (<em>integer</em>) – legnth to make the sides of the tiny image for comparison</p></li>
<li><p><strong>percentile</strong> (<em>integer</em>) – percentile to mark as abnormal</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe with a column that notes mismatches</p>
</dd>
</dl>
<p>and within range images
:rtype: Dataframe</p>
</dd></dl>

<dl class="py function">
<dt id="cleanX.find_very_hazy">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">find_very_hazy</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.find_very_hazy" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds pictures that are really “hazy” i.e. there is no real straight line
because they are blurred. Usually, at least the left or right tag
should give straight lines, thus this function finds image of a certain
questionable technique level.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>directory</strong> (<em>directory</em>) – The folder where the images are</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dataframe with imgs sorted as hazy or regular under label_for_haze</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.harsh_sharpie_enhance">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">harsh_sharpie_enhance</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.harsh_sharpie_enhance" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a new image that is very sharper to the human eye,
and has new values in most of the pixels(besides the background)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image</strong> (<em>string</em>) – String for image name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>new_image_array, a sharpened image for humans</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>nd.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.histogram_difference_for_inverts">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">histogram_difference_for_inverts</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.histogram_difference_for_inverts" title="Permalink to this definition">¶</a></dt>
<dd><p>This function looks for images by a spike on the end of thier pixel
value histogram to find inverted images. Note we assume classical
X-rays, not inverted floroscopy images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>directory</strong> (<em>Directory</em>) – Directory (folder).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of images suspected to be inverted</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.histogram_difference_for_inverts_todf">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">histogram_difference_for_inverts_todf</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.histogram_difference_for_inverts_todf" title="Permalink to this definition">¶</a></dt>
<dd><p>This function looks for images by a spike on the end of thier pixel
value histogram to find inverted images, then puts what it found into
a dataframe. Images are listed as regulars, inverts of unclear (the
unclear have equal spikes on both ends)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>directory</strong> (<em>Directory</em>) – Directory (folder).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dataframe with images categorized</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.proportions_ht_wt_to_histo">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">proportions_ht_wt_to_histo</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bins_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.proportions_ht_wt_to_histo" title="Permalink to this definition">¶</a></dt>
<dd><p>Looks in the directory given, produces a histogram of various proportions
of the images by dividing their height by widths.
Important information as many neural nets take images all the
same size. Clasically most chestXrays are 2500*2000 or 2500 <a href="#id3"><span class="problematic" id="id4">*</span></a>2048;
however the dataset may be different and/or varied</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder_name</strong> (<em>string</em>) – Folder_name, directory name.</p></li>
<li><p><strong>bins_count</strong> (<em>int</em>) – bins_count, number of bins desired (defaults to 10)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>histo_ht_wt_p, a labeled histogram</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.reasonable_rotation_augmentation">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">reasonable_rotation_augmentation</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">angle1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_slices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.reasonable_rotation_augmentation" title="Permalink to this definition">¶</a></dt>
<dd><p>Works on a single image, and returns a list of augmented images which are
based on twisting the angle from angle1 to angle2 with ‘number_slices’ as
the number of augmented images to be made from the original. It is not
realistic or desirable to augment images of most Xrays by flipping them. In
abdominal or chest X-rays that would create an augmentation that could
imply specific pathologies e.g. situs inversus. We suggest augmenting
between angles -5 to 5.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>angle1</strong> (<em>float</em>) – angle1 is the angle from the original to the first augmented</p></li>
<li><p><strong>angle2</strong> (<em>float</em>) – angle2 is the angle from the original to the last augmented</p></li>
<li><p><strong>number_slices</strong> (<em>int</em>) – number of images to be produced</p></li>
<li><p><strong>image</strong> (<em>Image</em><em> (</em><em>JPEG</em><em>)</em>) – Image</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of PIL images</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.salting">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">salting</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.salting" title="Permalink to this definition">¶</a></dt>
<dd><p>This function adds some noise to an image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>img_name</strong> (<em>string</em>) – String for image name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>new_image_array, with noise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>nd.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.see_part_potential_bias">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">see_part_potential_bias</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensitive_column_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.see_part_potential_bias" title="Permalink to this definition">¶</a></dt>
<dd><p>This function gives you a tabulated dataframe of sensitive columns e.g.
gender, race, or whichever you think are relevant,
in terms of a labels (put in the label column name).
You may discover all your pathologically labeled sample are of one ethnic
group, gender or other category in your dataframe. Remeber some early
neural nets for chest-Xrays were less accurate in women and the fact that
there were fewer Xrays of women in the datasets they built on did not help</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>Dataframe</em>) – Dataframe including sample IDs, labels, and sensitive columns</p></li>
<li><p><strong>label</strong> (<em>string</em>) – The name of the column with the labels</p></li>
<li><p><strong>sensitive_column_list</strong> (<em>list</em>) – List names sensitive columns on dataframe</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tab_fight_bias2, a neatly sorted dataframe</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.seperate_image_averger">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">seperate_image_averger</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">set_of_images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.seperate_image_averger" title="Permalink to this definition">¶</a></dt>
<dd><p>To run on a list to make a prototype tiny Xray that is an averages image</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>set_of_images</strong> – Set_of_images</p></li>
<li><p><strong>s</strong> (<em>integer</em>) – length of sides in the image made</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>image</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>image</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.show_duplicates">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">show_duplicates</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.show_duplicates" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a dataframe (if you have a dataframe for images) and prints
duplicated rows</p>
</dd></dl>

<dl class="py function">
<dt id="cleanX.show_images_in_df">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">show_images_in_df</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iter_ob</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legnth_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.show_images_in_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Shows images by taking them off a dataframe column, and puts them up
but smaller, so they can be compared quickly</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inter_ob</strong> – List, should be a dataframe column</p></li>
<li><p><strong>legnth_name</strong> (<em>integer</em>) – Size of image name going from end</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>technically no return but makes a plot of images with names</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>none</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.show_major_lines_on_image">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">show_major_lines_on_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pic_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.show_major_lines_on_image" title="Permalink to this definition">¶</a></dt>
<dd><p>A function that takes individual images and shows suspect lines i.e.
lines more likely to be non-biological.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pic_name</strong> (<em>string</em>) – String of image full name e.g. “C:/folder/image.jpg”</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>shows image but technically returns a matplotlib plotted image</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>matplotlib.image.AxesImage</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.simple_rotation_augmentation">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">simple_rotation_augmentation</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">angle_list1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.simple_rotation_augmentation" title="Permalink to this definition">¶</a></dt>
<dd><p>This function takes one picture and rotates is by a number
of degress is angle_list1.This function can be used with the
augment_and_move function as follows (example):
augment_and_move(</p>
<blockquote>
<div><p>‘D:/my_academia/dataset/random_within_domain’,
‘D:/my_academia/elo’,
[partial(simple_rotation_augmentation,5)],</p>
</div></blockquote>
<p>)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image</strong> (<em>Image</em><em> (</em><em>JPEG</em><em>)</em>) – Image.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>rotated image</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>PIL image</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.simpler_crop">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">simpler_crop</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.simpler_crop" title="Permalink to this definition">¶</a></dt>
<dd><p>Crops an image of a black frame</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image</strong> (<em>Image</em><em> (</em><em>JPEG</em><em>)</em>) – Image</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>image cropped of black edges</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>image[
np.min(y_nonzero):np.max(y_nonzero),
np.min(x_nonzero):np.max(x_nonzero))</p>
</dd>
</dl>
<p>]</p>
</dd></dl>

<dl class="py function">
<dt id="cleanX.subtle_sharpie_enhance">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">subtle_sharpie_enhance</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.subtle_sharpie_enhance" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a new image that is very subtly sharper to the human eye,
but has new values in most of the pixels(besides the background)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image</strong> (<em>string</em>) – String for image name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>new_image_array, a nearly imperceptibly sharpened image for humans</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>nd.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.tesseract_specific">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">tesseract_specific</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.tesseract_specific" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds images with text on them. Multi-lingual including English.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>directory</strong> (<em>Directory</em>) – Directory (folder).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe with a column of text found</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanX.understand_df">
<code class="sig-prename descclassname"><span class="pre">cleanX.</span></code><code class="sig-name descname"><span class="pre">understand_df</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanX.understand_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a dataframe (if you have a dataframe for images) and prints
information including length, data types, nulls and number of
duplicated rows</p>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">cleanX</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">cleanX</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">cleanX module</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">cleanX</a><ul>
      <li>Previous: <a href="modules.html" title="previous chapter">cleanX</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, doctormakeda@gmail.com.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/cleanX.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>